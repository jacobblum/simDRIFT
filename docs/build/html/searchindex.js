Search.setIndex({"docnames": ["cli-index", "index", "install-index", "quickstart-index", "simulation-index", "theory-index"], "filenames": ["cli-index.rst", "index.rst", "install-index.rst", "quickstart-index.rst", "simulation-index.rst", "theory-index.rst"], "titles": ["Command Line Interface", "SimDRIFT Documentation Home", "Installation", "Quickstart", "Simulation Module", "Theory"], "terms": {"thi": [0, 1, 2, 4, 5], "i": [0, 1, 2, 4, 5], "list": [0, 4], "arg1": 0, "arg2": 0, "allow": [1, 5], "user": [1, 5], "sim": [1, 5], "ulat": 1, "d": [1, 4, 5], "iffus": 1, "r": [1, 4, 5], "ealist": 1, "mage": 1, "f": [1, 5], "eatur": 1, "t": [1, 5], "issu": 1, "librari": [1, 4], "exist": [1, 5], "serv": 1, "gener": [1, 5], "customiz": 1, "mont": [1, 4, 5], "carlo": [1, 4, 5], "simul": [1, 3], "forward": [1, 4, 5], "problem": [1, 5], "diffus": 1, "weight": [1, 4, 5], "magnet": 1, "reson": [1, 4], "imag": [1, 3, 4, 5], "dmri": [1, 5], "signal": [1, 4], "acquisit": 1, "within": [1, 4, 5], "complex": [1, 5], "biophys": [1, 5], "relev": [1, 5], "domain": [1, 5], "instal": 1, "quickstart": 1, "theori": 1, "introductori": 1, "mr": 1, "concept": 1, "The": [1, 2, 4], "bloch": 1, "equat": 1, "torrei": 1, "puls": [1, 4], "gradient": [1, 4], "spin": 1, "echo": [1, 4], "pgse": [1, 4], "experi": [1, 4], "sjejskal": 1, "tanner": 1, "refer": 1, "modul": 1, "main": 1, "script": 1, "setup": 1, "function": [1, 5], "class": 1, "object": 1, "physic": 1, "save": 1, "output": 1, "miscellan": 1, "command": 1, "line": 1, "interfac": 1, "argument": 1, "index": [1, 4], "search": 1, "page": 1, "project": 1, "under": [1, 5], "activ": [1, 2, 5], "develop": [1, 5], "recommend": 2, "follow": [2, 5], "creat": 2, "conda": 2, "environ": [2, 5], "n": [2, 4, 5], "simdrift": [2, 3], "appropri": 2, "version": 2, "pytorch": 2, "shown": [2, 5], "below": [2, 3, 5], "us": [2, 4, 5], "syntax": 2, "our": [2, 5], "lab": 2, "": [2, 4, 5], "gpu": [2, 4, 5], "howev": [2, 5], "specif": [2, 4, 5], "vari": 2, "base": 2, "your": 2, "cuda": [2, 4], "toolkit": 2, "torchvis": 2, "torchaudio": 2, "11": 2, "7": 2, "c": [2, 4, 5], "nvidia": 2, "clone": 2, "repositori": [2, 5], "git": 2, "http": 2, "github": 2, "com": 2, "jacobblum": 2, "pip": 2, "e": [2, 4, 5], "To": [2, 5], "confirm": 2, "everyth": 2, "work": 2, "expect": [2, 5], "run": [2, 3, 4], "test": 2, "suit": 2, "run_test": 2, "here": [3, 5], "we": [3, 5], "illustr": 3, "basic": 3, "usag": 3, "As": [3, 5], "exampl": [3, 5], "oper": [3, 5], "import": [3, 5], "o": [3, 5], "cmd": 3, "n_walker": [3, 4], "256e3": 3, "fiber_fract": [3, 4], "30": 3, "theta": 3, "0": [3, 5], "90": 3, "45": 3, "system": [3, 5], "dmri_simul": 4, "arg": 4, "dict": 4, "sourc": [4, 5], "instanc": 4, "model": [4, 5], "attribut": 4, "A": [4, 5], "dictionari": 4, "enter": 4, "cli": 4, "py": 4, "dmri_sim_wrapp": 4, "set_voxel_configur": 4, "_set_num_cel": 4, "cell_fract": 4, "cell_radii": 4, "voxel_dimens": 4, "buffer": 4, "calcul": [4, 5], "number": [4, 5], "requir": [4, 5], "acheiv": 4, "suppli": 4, "densiti": [4, 5], "fraction": [4, 5], "_set_num_fib": 4, "fiber_radii": 4, "fiber_configur": 4, "achiev": 4, "in_featur": 4, "int": 4, "size": 4, "each": [4, 5], "input": 4, "sampl": [4, 5], "out_featur": 4, "bia": 4, "bool": 4, "option": 4, "If": 4, "set": [4, 5], "fals": 4, "layer": 4, "learn": 4, "an": [4, 5], "addit": 4, "default": 4, "true": 4, "spin_init_posit": 4, "_find_spin_locations_kernel": 4, "resident_fiber_indxs_cuda": 4, "resident_cell_indxs_cuda": 4, "fiber_centers_cuda": 4, "fiber_directions_cuda": 4, "fiber_radii_cuda": 4, "cell_centers_cuda": 4, "cell_radii_cuda": 4, "spin_positions_cuda": 4, "locat": 4, "resid": [4, 5], "microstructur": [4, 5], "element": [4, 5], "nd": 4, "arrai": 4, "write": [4, 5], "indic": 4, "indici": 4, "coordin": 4, "direct": [4, 5], "vector": [4, 5], "radii": [4, 5], "\u00b5m": 4, "contain": 4, "initi": [4, 5], "posit": [4, 5], "_find_spin_loc": 4, "self": [4, 5], "helper": 4, "find": [4, 5], "cell_cent": 4, "cell_radiu": 4, "float": 4, "cell_diffus": 4, "center": 4, "ndarrai": 4, "bundl": 4, "radiu": 4, "spin_position_t1m": 4, "_caclulate_volum": 4, "_diffusion_context_manag": 4, "random_st": 4, "spin_posit": 4, "spin_in_fiber_at_index": 4, "fiber_cent": 4, "fiber_step": 4, "fiber_direct": 4, "spin_in_cell_at_index": 4, "cell_step": 4, "water_step": 4, "void": 4, "rng_state": 4, "spinposit": 4, "n_spin": 4, "3": [4, 5], "numpi": 4, "spin_in_fiber_kei": 4, "spin_in_fib": 4, "th": [4, 5], "1": [4, 5], "_simulate_diffus": 4, "none": 4, "delta": [4, 5], "time": [4, 5], "dt": 4, "discret": 4, "also": 4, "narrow": [4, 5], "approxim": [4, 5], "equal": 4, "updat": [4, 5], "trajectori": [4, 5], "reject": [4, 5], "discuss": [4, 5], "k": [4, 5], "song": 4, "walk_in_cel": 4, "_diffusion_in_cel": 4, "random": [4, 5], "step": [4, 5], "voxel": [4, 5], "criteria": 4, "outsid": 4, "thu": [4, 5], "confin": 4, "reason": 4, "so": [4, 5], "long": 4, "doe": 4, "exce": 4, "intra": [4, 5], "cellular": [4, 5], "pre": 4, "exchangl": 4, "lifetim": [4, 5], "absolut": 4, "current": 4, "thread": [4, 5], "entir": 4, "grid": 4, "block": 4, "numba": 4, "cudadrv": 4, "devicearrai": 4, "devicendarrai": 4, "xoroshiro128p": 4, "state": [4, 5], "cordin": 4, "um": 4, "configur": [4, 5], "shape": 4, "where": [4, 5], "denot": [4, 5], "ensembl": [4, 5], "n_fiber": 4, "x": [4, 5], "comput": [4, 5], "manner": [4, 5], "occupi": 4, "yang": 4, "dm": 4, "huettner": 4, "je": 4, "bretthorst": 4, "gl": 4, "neil": 4, "jj": 4, "garbow": 4, "jr": 4, "ackerman": 4, "jjh": 4, "intracellular": 4, "preexchang": [4, 5], "neuron": 4, "astrocyt": 4, "magn": 4, "med": 4, "2018": 4, "mar": 4, "79": 4, "1616": 4, "1627": 4, "doi": 4, "10": [4, 5], "1002": 4, "mrm": 4, "26781": 4, "epub": 4, "2017": 4, "jul": 4, "4": [4, 5], "pmid": 4, "28675497": 4, "pmcid": 4, "pmc5754269": 4, "walk_in_fib": 4, "_diffusion_in_fib": 4, "fiber_radiu": 4, "walk_in_wat": 4, "_diffusion_in_wat": 4, "extra": 4, "compart": [4, 5], "ani": 4, "constitu": 4, "n_cell": 4, "_add_nois": 4, "snr": 4, "add": 4, "gaussian": [4, 5], "nois": 4, "np": 4, "ratio": 4, "b0": 4, "n_bval": 4, "b": [4, 5], "valu": [4, 5], "bval": 4, "file": 4, "noised_sign": 4, "garyfallidi": 4, "brett": 4, "m": [4, 5], "amirbekian": 4, "rokem": 4, "van": 4, "der": 4, "walt": 4, "descoteaux": 4, "nimmo": 4, "smith": 4, "dipi": 4, "contributor": 4, "2014": 4, "analysi": 4, "mri": [4, 5], "data": [4, 5], "frontier": 4, "neuroinformat": 4, "vol": 4, "8": 4, "_generate_signals_and_trajectori": 4, "organ": 4, "store": 4, "combin": 4, "incid": 4, "_save_data": 4, "_signal": 4, "bvec": 4, "from": [4, 5], "execut": 4, "cupi": 4, "correspond": [4, 5], "walker": 4, "factor": [4, 5], "becaus": [4, 5], "infinit": 4, "umber": 4, "trajectory_t1m": 4, "trajectory_t2p": 4, "final": 4, "hall": 4, "g": [4, 5], "alexand": 4, "2009": 4, "converg": [4, 5], "choic": 4, "ieee": 4, "tran": 4, "28": 4, "1354": 4, "1364": 4, "1109": 4, "tmi": 4, "2015756": 4, "j": [4, 5], "l": 4, "h": [4, 5], "2": [4, 5], "1354u": 4, "20131364": 4, "section": 5, "present": 5, "construct": 5, "deriv": 5, "analyt": 5, "solut": 5, "materi": 5, "fundamet": 5, "understand": 5, "aquisit": 5, "natur": 5, "motiv": 5, "need": 5, "method": 5, "In": 5, "zeeman": 5, "split": 5, "its": 5, "relationship": 5, "nuclear": 5, "nmr": 5, "callaghan": 5, "_": 5, "given": 5, "quantum": 5, "mechan": 5, "phenomenon": 5, "throughout": 5, "frequenlti": 5, "paul": 5, "dirac": 5, "bra": 5, "ket": 5, "notat": 5, "therefor": 5, "precis": 5, "let": 5, "mathcal": 5, "finit": 5, "dimension": 5, "space": 5, "v": 5, "mai": 5, "symbol": 5, "call": 5, "Its": 5, "dual": 5, "langl": 5, "cdot": 5, "rangl": 5, "can": 5, "thought": 5, "act": 5, "appl": 5, "form": 5, "u": 5, "which": 5, "inner": 5, "product": 5, "begin": 5, "angular": 5, "momentum": 5, "conserv": 5, "fundament": 5, "law": 5, "reflect": 5, "isotropi": 5, "total": 5, "mathbf": 5, "pmatrix": 5, "j_": 5, "y": 5, "z": 5, "end": 5, "assum": 5, "convent": 5, "quantiz": 5, "axi": 5, "have": 5, "hbar": 5, "qquad": 5, "interg": 5, "half": 5, "proton": 5, "particl": 5, "interest": 5, "most": 5, "ar": 5, "equip": 5, "sort": 5, "intern": 5, "particular": 5, "nucleu": 5, "intrins": 5, "describ": 5, "internel": 5, "degre": 5, "freedom": 5, "frac": 5, "sigma_": 5, "satifi": 5, "eigenvalu": 5, "relat": 5, "abov": 5, "pauli": 5, "matrix": 5, "defin": 5, "moment": 5, "boldsymbol": 5, "mu": 5, "between": 5, "gamma_": 5, "pi": 5, "gyromagnet": 5, "ration": 5, "plank": 5, "constant": 5, "kinet": 5, "energi": 5, "move": 5, "homogen": 5, "electromagnet": 5, "field": 5, "hamiltonian": 5, "evolut": 5, "displaystyl": 5, "sum_": 5, "textbf": 5, "convention": 5, "b_": 5, "substitut": 5, "schroding": 5, "get": 5, "see": 5, "express": 5, "e_": 5, "quad": 5, "ha": 5, "two": 5, "implic": 5, "first": 5, "immedi": 5, "notic": 5, "absens": 5, "extern": 5, "possibl": 5, "associ": 5, "pm": 5, "degener": 5, "second": 5, "presenc": 5, "degeneraci": 5, "resolv": 5, "linear": 5, "remark": 5, "non": 5, "trival": 5, "popul": 5, "align": 5, "anti": 5, "parallel": 5, "respect": 5, "higher": 5, "observ": 5, "excess": 5, "reli": 5, "transit": 5, "excit": 5, "gamma": 5, "m_": 5, "underbrac": 5, "omega_": 5, "quantiti": 5, "larmor": 5, "frequenc": 5, "fall": 5, "radio": 5, "rf": 5, "rang": 5, "applic": 5, "transvers": 5, "plane": 5, "orthogon": 5, "net": 5, "caus": 5, "tip": 5, "out": 5, "equilibrium": 5, "precess": 5, "about": 5, "new": 5, "flip": 5, "angl": 5, "alpha": 5, "paramet": 5, "receiv": 5, "coil": 5, "measur": 5, "detect": 5, "some": 5, "small": 5, "volum": 5, "omega": 5, "partial": 5, "mu_": 5, "certainli": 5, "oversimplifi": 5, "neglect": 5, "interact": 5, "local": 5, "decai": 5, "t_": 5, "relax": 5, "term": 5, "beyond": 5, "scope": 5, "introduct": 5, "reader": 5, "induct": 5, "1970": 5, "complet": 5, "solv": 5, "For": 5, "experiment": 5, "condit": 5, "do": 5, "standard": 5, "numer": 5, "recipi": 5, "euler": 5, "deploi": 5, "certain": 5, "simplif": 5, "easili": 5, "found": 5, "normal": 5, "case": 5, "hat": 5, "mathrm": 5, "re": 5, "more": 5, "convien": 5, "differenti": 5, "affin": 5, "transform": 5, "bmatrix": 5, "guarante": 5, "invert": 5, "map": 5, "produc": 5, "order": 5, "mapsto": 5, "compactli": 5, "depend": 5, "text": 5, "exp": 5, "bigg": 5, "repres": 5, "seek": 5, "minim": 5, "both": 5, "potenti": 5, "thermal": 5, "contact": 5, "ambient": 5, "bath": 5, "explicit": 5, "close": 5, "obtain": 5, "recal": 5, "statist": 5, "boltzman": 5, "distribut": 5, "elucid": 5, "exact": 5, "temperatur": 5, "tool": 5, "analyz": 5, "magniz": 5, "appli": 5, "themselv": 5, "stationari": 5, "alwai": 5, "1956": 5, "one": 5, "purcel": 5, "collabor": 5, "further": 5, "motion": 5, "process": 5, "ad": 5, "propos": 5, "theoret": 5, "modern": 5, "techniqu": 5, "sensit": 5, "One": 5, "notabl": 5, "take": 5, "place": 5, "nuclei": 5, "By": 5, "phenomenolog": 5, "like": 5, "assumpt": 5, "adopt": 5, "perturb": 5, "approach": 5, "show": 5, "exactli": 5, "circumst": 5, "consid": 5, "nabla": 5, "varepsilon": 5, "formul": 5, "longrightarrow": 5, "written": 5, "spatial": 5, "make": 5, "amen": 5, "Of": 5, "cours": 5, "biolog": 5, "solid": 5, "tissu": 5, "micro": 5, "structur": 5, "usual": 5, "barrier": 5, "tensor": 5, "incred": 5, "oversimplif": 5, "still": 5, "regard": 5, "fourier": 5, "averag": 5, "propag": 5, "try": 5, "mc": 5, "suffici": 5, "purpos": 5, "proce": 5, "q": 5, "collect": 5, "seen": 5, "invers": 5, "through": 5, "fubini": 5, "theorem": 5, "rearang": 5, "left": 5, "right": 5, "int_": 5, "mathbb": 5, "interc": 5, "prime": 5, "amount": 5, "integr": 5, "squar": 5, "simplifi": 5, "familiar": 5, "sqrt": 5, "simpl": 5, "chang": 5, "variabl": 5, "now": 5, "just": 5, "recogn": 5, "correl": 5, "probabl": 5, "henceforth": 5, "stejskal": 5, "1965": 5, "molecular": 5, "occur": 5, "haack": 5, "idea": 5, "bulk": 5, "hit": 5, "durat": 5, "encod": 5, "phase": 5, "shift": 5, "accord": 5, "varphi": 5, "tau": 5, "refocus": 5, "pi_": 5, "again": 5, "schemat": 5, "top": 5, "sequenc": 5, "transmiss": 5, "middl": 5, "result": 5, "bottom": 5, "depict": 5, "odot": 5, "te": 5, "actual": 5, "instead": 5, "scale": 5, "independ": 5, "due": 5, "secondli": 5, "via": 5, "green": 5, "goal": 5, "onli": 5, "simpli": 5, "divid": 5, "induc": 5, "absenc": 5, "attenu": 5, "bear": 5, "wavevector": 5, "neighborhood": 5, "thei": 5, "rho": 5, "fron": 5, "modulo": 5, "safe": 5, "account": 5, "divis": 5, "hahn": 5, "bar": 5, "literatur": 5, "unbound": 5, "kernel": 5, "rather": 5, "propog": 5, "attent": 5, "reciproc": 5, "care": 5, "realiz": 5, "essenti": 5, "free": 5, "unrestrict": 5, "known": 5, "famou": 5, "scalar": 5, "intract": 5, "chebyshev": 5, "spectral": 5, "yield": 5, "when": 5, "too": 5, "complic": 5, "On": 5, "design": 5, "mimic": 5, "must": 5, "realist": 5, "walk": 5, "uniformli": 5, "subsequ": 5, "constraint": 5, "remain": 5, "sinc": 5, "typic": 5, "mean": 5, "tau_i": 5, "water": 5, "flux": 5, "compon": 5, "exchang": 5, "ensur": 5, "At": 5, "dd": 5, "displac": 5, "distanc": 5, "determin": 5, "specifi": 5, "va": 5, "xoroshiro128": 5, "pseudo": 5, "dure": 5, "6": 5, "vu": 5, "larg": 5, "code": 5, "wa": 5, "consider": 5, "toward": 5, "preform": 5, "individu": 5, "signl": 5, "graphic": 5, "unit": 5, "overal": 5, "runtim": 5, "featur": 5, "25": 5, "15": 5, "60": 5, "minut": 5, "arbitrari": 5, "geometri": 5, "character": 5, "n_": 5, "fiber": 5, "distinct": 5, "orient": 5, "axon": 5, "cell": 5, "eval": 5, "inter": 5, "alia": 5, "rapid": 5, "prototyp": 5, "valid": 5, "comparison": 5, "author": 5, "particularli": 5, "evalut": 5, "variou": 5, "capac": 5, "recoveri": 5, "ground": 5, "truth": 5, "pt": 5, "principl": 5, "microscopi": 5, "oxford": 5, "univers": 5, "press": 5, "1995": 5, "em": 5, "brown": 5, "rw": 5, "et": 5, "al": 5, "york": 5, "wilei": 5, "1999": 5}, "objects": {"": [[4, 0, 0, "-", "diffusion"], [4, 0, 0, "-", "linalg"], [4, 0, 0, "-", "save"], [4, 0, 0, "-", "set_voxel_configuration"], [4, 0, 0, "-", "spin_init_positions"]], "diffusion": [[4, 1, 1, "", "_caclulate_volumes"], [4, 1, 1, "", "_diffusion_context_manager"], [4, 1, 1, "", "_simulate_diffusion"]], "objects": [[4, 2, 1, "", "cell"], [4, 2, 1, "", "fiber"], [4, 2, 1, "", "spin"]], "save": [[4, 1, 1, "", "_add_noise"], [4, 1, 1, "", "_generate_signals_and_trajectories"], [4, 1, 1, "", "_save_data"], [4, 1, 1, "", "_signal"]], "set_voxel_configuration": [[4, 1, 1, "", "_set_num_cells"], [4, 1, 1, "", "_set_num_fibers"]], "simulation": [[4, 1, 1, "", "dmri_sim_wrapper"], [4, 2, 1, "", "dmri_simulation"], [4, 1, 1, "", "run"]], "spin_init_positions": [[4, 1, 1, "", "_find_spin_locations"], [4, 1, 1, "", "_find_spin_locations_kernel"]], "walk_in_cell": [[4, 1, 1, "", "_diffusion_in_cell"]], "walk_in_fiber": [[4, 1, 1, "", "_diffusion_in_fiber"]], "walk_in_water": [[4, 1, 1, "", "_diffusion_in_water"]]}, "objtypes": {"0": "py:module", "1": "py:function", "2": "py:class"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "function", "Python function"], "2": ["py", "class", "Python class"]}, "titleterms": {"command": 0, "line": 0, "interfac": 0, "argument": 0, "simdrift": 1, "document": 1, "home": 1, "content": 1, "indic": 1, "tabl": 1, "instal": 2, "quickstart": 3, "simul": [4, 5], "modul": 4, "main": 4, "script": 4, "setup": 4, "function": 4, "class": 4, "object": 4, "cell": 4, "fiber": 4, "spin": [4, 5], "diffus": [4, 5], "physic": [4, 5], "wrapper": 4, "paramet": 4, "return": 4, "note": 4, "refer": [4, 5], "water": 4, "save": 4, "output": 4, "miscellan": 4, "theori": 5, "introductori": 5, "mr": 5, "concept": 5, "The": 5, "magnet": 5, "reson": 5, "bloch": 5, "equat": 5, "torrei": 5, "puls": 5, "gradient": 5, "echo": 5, "pgse": 5, "experi": 5, "sjejskal": 5, "tanner": 5, "signal": 5, "acquisit": 5}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.viewcode": 1, "sphinx": 57}, "alltitles": {"Command Line Interface": [[0, "command-line-interface"]], "Arguments": [[0, "arguments"]], "SimDRIFT Documentation Home": [[1, "simdrift-documentation-home"]], "Contents": [[1, "contents"]], "Indices and tables": [[1, "indices-and-tables"]], "Installation": [[2, "installation"]], "Quickstart": [[3, "quickstart"]], "Simulation Module": [[4, "simulation-module"]], "Main Script": [[4, "main-script"]], "Setup Functions": [[4, "module-set_voxel_configuration"]], "Class Objects": [[4, "class-objects"]], "Cells": [[4, "cells"]], "Fibers": [[4, "fibers"]], "Spins": [[4, "spins"]], "Diffusion Physics": [[4, "diffusion-physics"]], "Wrapper": [[4, "module-diffusion"]], "Parameters": [[4, "parameters"]], "Returns": [[4, "returns"]], "Notes": [[4, "notes"]], "References": [[4, "references"], [4, "id1"], [5, "references"]], "Diffusion in Cells": [[4, "diffusion-in-cells"]], "Diffusion in Fibers": [[4, "diffusion-in-fibers"]], "Diffusion in Water": [[4, "diffusion-in-water"]], "Save Outputs": [[4, "module-save"]], "Miscellaneous Functions": [[4, "module-linalg"]], "Theory": [[5, "theory"]], "Introductory MR Concepts:": [[5, "introductory-mr-concepts"]], "The Physics of Magnetic Resonance": [[5, "the-physics-of-magnetic-resonance"]], "The Bloch Equation": [[5, "the-bloch-equation"]], "The Bloch-Torrey Equation": [[5, "the-bloch-torrey-equation"]], "The Pulsed Gradient Spin Echo (PGSE) Experiment": [[5, "the-pulsed-gradient-spin-echo-pgse-experiment"]], "The Sjejskal-Tanner Equation": [[5, "the-sjejskal-tanner-equation"]], "Simulated Diffusion": [[5, "simulated-diffusion"]], "Simulated Signal Acquisition": [[5, "simulated-signal-acquisition"]]}, "indexentries": {}})